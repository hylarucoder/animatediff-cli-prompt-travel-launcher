import{i as a,s as w}from"./main.429c1dad.js";import{i as s}from"./ipcRenderer.ac34f8e7.js";import{_ as g,v as k,c as v,a as n,b as o,w as t,o as h,d as c,t as m,p as f,e as S}from"./entry.978b97f1.js";import{B as b}from"./index.77e35669.js";import{_ as I}from"./index.03d61709.js";import"./_getTag.cf4696dc.js";import"./index.esm.201addbf.js";import"./index.84c27b45.js";import"./AntdIcon.22ef303b.js";import"./InsertStyle.d154dc06.js";import"./devWarning.642abf93.js";import"./Compact.ff18982f.js";import"./useFlexGapSupport.2d7d1ead.js";const C={data(){return{messageString:"",message1:"",message2:"",message3:"",windowName:"window-ipc",newWcId:0,views:[{type:"vue",content:"#/special/subwindow",windowName:"window-ipc",windowTitle:"ipc window"}]}},mounted(){this.init()},methods:{init(){s.removeAllListeners(a.ipcSendMsg),s.on(a.ipcSendMsg,(e,i)=>{console.log("[ipcRenderer] [socketMsgStart] result:",i),this.messageString=i,e.sender.send(a.hello,"electron-egg")}),s.removeAllListeners(w.window2ToWindow1),s.on(w.window2ToWindow1,(e,i)=>{this.$message.info(i)})},sendMsgStart(){const e={type:"start",content:"开始"};s.send(a.ipcSendMsg,e)},sendMsgStop(){const e={type:"end",content:""};s.send(a.ipcSendMsg,e)},handleInvoke(){s.invoke(a.ipcInvokeMsg,"异步-回调").then(e=>{console.log("r:",e),this.message1=e})},async handleInvoke2(){const e=await s.invoke(a.ipcInvokeMsg,"异步");console.log("msg:",e),this.message2=e},handleSendSync(){const e=s.sendSync(a.ipcSendSyncMsg,"同步");this.message3=e},createWindow(e){s.invoke(a.createWindow,k(this.views[e])).then(i=>{console.log("[createWindow] id:",i)})},async sendTosubWindow(){this.newWcId=await s.invoke(a.getWCid,this.windowName),s.sendTo(this.newWcId,w.window1ToWindow2,"窗口1通过 sendTo 给窗口2发送消息")}}},_=e=>(f("data-v-a64bab98"),e=e(),S(),e),y={id:"app-base-socket-ipc"},W=_(()=>n("div",{class:"one-block-1"},[n("span",null," 1. 发送异步消息 ")],-1)),M={class:"one-block-2"},T=_(()=>n("p",null,null,-1)),x=_(()=>n("div",{class:"one-block-1"},[n("span",null," 2. 同步消息（不推荐，阻塞执行） ")],-1)),N={class:"one-block-2"},B=_(()=>n("div",{class:"one-block-1"},[n("span",null," 3. 长消息： 服务端持续向前端页面发消息 ")],-1)),R={class:"one-block-2"},A=_(()=>n("div",{class:"one-block-1"},[n("span",null," 4. 多窗口通信：子窗口与主进程通信，子窗口互相通信 ")],-1)),V={class:"one-block-2"};function L(e,i,D,E,r,d){const l=b,p=I;return h(),v("div",y,[W,n("div",M,[o(p,null,{default:t(()=>[o(l,{onClick:d.handleInvoke},{default:t(()=>[c("发送 - 回调")]),_:1},8,["onClick"]),c(" 结果："+m(r.message1),1)]),_:1}),T,o(p,null,{default:t(()=>[o(l,{onClick:d.handleInvoke2},{default:t(()=>[c("发送 - async/await")]),_:1},8,["onClick"]),c(" 结果："+m(r.message2),1)]),_:1})]),x,n("div",N,[o(p,null,{default:t(()=>[o(l,{onClick:d.handleSendSync},{default:t(()=>[c("同步消息")]),_:1},8,["onClick"]),c(" 结果："+m(r.message3),1)]),_:1})]),B,n("div",R,[o(p,null,{default:t(()=>[o(l,{onClick:d.sendMsgStart},{default:t(()=>[c("开始")]),_:1},8,["onClick"]),o(l,{onClick:d.sendMsgStop},{default:t(()=>[c("结束")]),_:1},8,["onClick"]),c(" 结果："+m(r.messageString),1)]),_:1})]),A,n("div",V,[o(p,null,{default:t(()=>[o(l,{onClick:i[0]||(i[0]=u=>d.createWindow(0))},{default:t(()=>[c("打开新窗口2")]),_:1}),o(l,{onClick:i[1]||(i[1]=u=>d.sendTosubWindow())},{default:t(()=>[c("向新窗口2发消息")]),_:1})]),_:1})])])}const Y=g(C,[["render",L],["__scopeId","data-v-a64bab98"]]);export{Y as default};
