import{i as c,s as g}from"./main.429c1dad.js";import{i as n}from"./ipcRenderer.ac34f8e7.js";import{_ as u,c as k,a as s,b as o,w as t,o as h,d as i,t as m,p as v,e as S}from"./entry.978b97f1.js";import{B as f}from"./index.77e35669.js";import{_ as w}from"./index.03d61709.js";import"./_getTag.cf4696dc.js";import"./index.esm.201addbf.js";import"./index.84c27b45.js";import"./AntdIcon.22ef303b.js";import"./InsertStyle.d154dc06.js";import"./devWarning.642abf93.js";import"./Compact.ff18982f.js";import"./useFlexGapSupport.2d7d1ead.js";const C={data(){return{messageString:"",message1:"",message2:"",message3:"",mainWCid:0}},mounted(){this.init()},methods:{init(){n.removeAllListeners(c.ipcSendMsg),n.on(c.ipcSendMsg,(e,a)=>{console.log("[ipcRenderer] [socketMsgStart] result:",a),this.messageString=a,e.sender.send(c.hello,"electron-egg")}),n.removeAllListeners(g.window1ToWindow2),n.on(g.window1ToWindow2,(e,a)=>{this.$message.info(a)})},sendMsgStart(){const e={type:"start",content:"开始"};n.send(c.ipcSendMsg,e)},sendMsgStop(){const e={type:"end",content:""};n.send(c.ipcSendMsg,e)},handleInvoke(){n.invoke(c.ipcInvokeMsg,"异步-回调").then(e=>{console.log("r:",e),this.message1=e})},async handleInvoke2(){const e=await n.invoke(c.ipcInvokeMsg,"异步");console.log("msg:",e),this.message2=e},handleSendSync(){const e=n.sendSync(c.ipcSendSyncMsg,"同步");this.message3=e},sendTosubWindow(){n.invoke(c.getWCid,"main").then(e=>{this.mainWCid=e,n.sendTo(this.mainWCid,g.window2ToWindow1,"窗口2 通过 sendTo 给主窗口发送消息")})}}},p=e=>(v("data-v-485e7635"),e=e(),S(),e),b={id:"app-base-subwindow-ipc"},I=p(()=>s("div",{class:"one-block-1"},[s("span",null," 1. 发送异步消息 ")],-1)),M={class:"one-block-2"},y=p(()=>s("p",null,null,-1)),W=p(()=>s("div",{class:"one-block-1"},[s("span",null," 2. 同步消息（不推荐，阻塞执行） ")],-1)),T={class:"one-block-2"},x=p(()=>s("div",{class:"one-block-1"},[s("span",null," 3. 长消息： 服务端持续向前端页面发消息 ")],-1)),B={class:"one-block-2"},A=p(()=>s("div",{class:"one-block-1"},[s("span",null," 4. 多窗口通信：窗口之间互相通信 ")],-1)),N={class:"one-block-2"};function R(e,a,V,L,r,d){const l=f,_=w;return h(),k("div",b,[I,s("div",M,[o(_,null,{default:t(()=>[o(l,{onClick:d.handleInvoke},{default:t(()=>[i("发送 - 回调")]),_:1},8,["onClick"]),i(" 结果："+m(r.message1),1)]),_:1}),y,o(_,null,{default:t(()=>[o(l,{onClick:d.handleInvoke2},{default:t(()=>[i("发送 - async/await")]),_:1},8,["onClick"]),i(" 结果："+m(r.message2),1)]),_:1})]),W,s("div",T,[o(_,null,{default:t(()=>[o(l,{onClick:d.handleSendSync},{default:t(()=>[i("同步消息")]),_:1},8,["onClick"]),i(" 结果："+m(r.message3),1)]),_:1})]),x,s("div",B,[o(_,null,{default:t(()=>[o(l,{onClick:d.sendMsgStart},{default:t(()=>[i("开始")]),_:1},8,["onClick"]),o(l,{onClick:d.sendMsgStop},{default:t(()=>[i("结束")]),_:1},8,["onClick"]),i(" 结果："+m(r.messageString),1)]),_:1})]),A,s("div",N,[o(_,null,{default:t(()=>[o(l,{onClick:a[0]||(a[0]=D=>d.sendTosubWindow())},{default:t(()=>[i("向主窗口发消息")]),_:1})]),_:1})])])}const X=u(C,[["render",R],["__scopeId","data-v-485e7635"]]);export{X as default};
