import{B as E}from"./index.77e35669.js";import{_ as P}from"./index.cd0ebdfb.js";import{s as H,r as F,o as I,c as q,a as p,b as h,w as _,d as w,t as M,x}from"./entry.978b97f1.js";import"./_getTag.cf4696dc.js";import"./index.esm.201addbf.js";import"./index.84c27b45.js";import"./AntdIcon.22ef303b.js";import"./InsertStyle.d154dc06.js";import"./devWarning.642abf93.js";import"./Compact.ff18982f.js";import"./useMergedState.1581dfbf.js";import"./LeftOutlined.b6276360.js";import"./omit.fb3562ba.js";import"./motion.ddb0acb0.js";import"./CloseOutlined.92919b35.js";import"./Keyframes.e2f385c2.js";import"./zoom.e2a25d90.js";import"./EyeOutlined.ee04c144.js";const d=typeof require<"u"?function(){return require("electron")}():function(){return console.error('If you need to use "electron" in the Renderer process, make sure that "nodeIntegration" is enabled in the Main process.'),{}}();let b;if(typeof document>"u"){b={};const s=["invoke","postMessage","send","sendSync","sendTo","sendToHost","addListener","emit","eventNames","getMaxListeners","listenerCount","listeners","off","on","once","prependListener","prependOnceListener","rawListeners","removeAllListeners","removeListener","setMaxListeners"];for(const a of s)b[a]=()=>{throw new Error(`ipcRenderer doesn't work in a Web Worker.
You can see https://github.com/electron-vite/vite-plugin-electron/issues/69`)}}else b=d.ipcRenderer;const k=d.clipboard;d.contextBridge;d.crashReporter;const R=d.nativeImage;d.shell;d.webFrame;d.deprecate;const W=require,e=W("fs");e.appendFile;e.appendFileSync;e.access;e.accessSync;e.chown;e.chownSync;e.chmod;e.chmodSync;e.close;e.closeSync;e.copyFile;e.copyFileSync;e.cp;e.cpSync;e.createReadStream;e.createWriteStream;e.exists;e.existsSync;e.fchown;e.fchownSync;e.fchmod;e.fchmodSync;e.fdatasync;e.fdatasyncSync;e.fstat;e.fstatSync;e.fsync;e.fsyncSync;e.ftruncate;e.ftruncateSync;e.futimes;e.futimesSync;e.lchown;e.lchownSync;e.lchmod;e.lchmodSync;e.link;e.linkSync;e.lstat;e.lstatSync;e.lutimes;e.lutimesSync;e.mkdir;e.mkdirSync;e.mkdtemp;e.mkdtempSync;e.open;e.openSync;e.opendir;e.opendirSync;e.readdir;e.readdirSync;e.read;e.readSync;e.readv;e.readvSync;e.readFile;e.readFileSync;e.readlink;e.readlinkSync;e.realpath;e.realpathSync;e.rename;e.renameSync;e.rm;e.rmSync;e.rmdir;e.rmdirSync;e.stat;e.statfs;e.statSync;e.statfsSync;e.symlink;e.symlinkSync;e.truncate;e.truncateSync;e.unwatchFile;e.unlink;e.unlinkSync;e.utimes;e.utimesSync;e.watch;e.watchFile;e.writeFile;e.writeFileSync;e.write;e.writeSync;e.writev;e.writevSync;e.Dir;e.Dirent;e.Stats;e.ReadStream;e.WriteStream;e.FileReadStream;e.FileWriteStream;e._toUnixTimestamp;e.F_OK;e.R_OK;e.W_OK;e.X_OK;e.constants;e.promises;const j=e.default||e,N=require,n=N("path");n.resolve;n.normalize;n.isAbsolute;n.join;n.relative;n.toNamespacedPath;n.dirname;n.basename;n.extname;n.format;n.parse;n.sep;n.delimiter;n.win32;n.posix;n._makeLong;const D=n.default||n,K=require,r=K("util");r._errnoException;r._exceptionWithHostPort;r._extend;r.callbackify;r.debug;r.debuglog;r.deprecate;r.format;r.formatWithOptions;r.getSystemErrorMap;r.getSystemErrorName;r.inherits;r.inspect;r.isArray;r.isBoolean;r.isBuffer;r.isDeepStrictEqual;r.isNull;r.isNullOrUndefined;r.isNumber;r.isString;r.isSymbol;r.isUndefined;r.isRegExp;r.isObject;r.isDate;r.isError;r.isFunction;r.isPrimitive;r.log;r.MIMEType;r.MIMEParams;r.parseArgs;r.promisify;r.stripVTControlCharacters;r.toUSVString;r.TextDecoder;r.TextEncoder;r.transferableAbortSignal;r.transferableAbortController;r.aborted;r.types;const L=r.default||r,U=require,t=U("crypto");t.checkPrime;t.checkPrimeSync;t.createCipheriv;t.createDecipheriv;t.createDiffieHellman;t.createDiffieHellmanGroup;t.createECDH;t.createHash;t.createHmac;t.createPrivateKey;t.createPublicKey;t.createSecretKey;t.createSign;t.createVerify;t.diffieHellman;t.generatePrime;t.generatePrimeSync;t.getCiphers;t.getCipherInfo;t.getCurves;t.getDiffieHellman;t.getHashes;t.hkdf;t.hkdfSync;t.pbkdf2;t.pbkdf2Sync;t.generateKeyPair;t.generateKeyPairSync;t.generateKey;t.generateKeySync;t.privateDecrypt;t.privateEncrypt;t.publicDecrypt;t.publicEncrypt;t.randomBytes;t.randomFill;t.randomFillSync;t.randomInt;t.randomUUID;t.scrypt;t.scryptSync;t.sign;t.setEngine;t.timingSafeEqual;t.getFips;t.setFips;t.verify;t.Certificate;t.Cipher;t.Cipheriv;t.Decipher;t.Decipheriv;t.DiffieHellman;t.DiffieHellmanGroup;t.ECDH;t.Hash;t.Hmac;t.KeyObject;t.Sign;t.Verify;t.X509Certificate;t.secureHeapUsed;t.createCipher;t.createDecipher;t.fips;t.DEFAULT_ENCODING;t.constants;t.webcrypto;t.subtle;t.getRandomValues;t.prng;t.pseudoRandomBytes;t.rng;const $=t.default||t,B=require("sharp");function T(s){const a=$.createHash("md5");return a.update(s),a.digest("hex")}const C=L.promisify(j.mkdir),O=[100,320,640,768,1024,1280,1600,2e3],v=()=>{const s=new Date,a=s.getFullYear();let o=`${s.getMonth()+1}`;return o.length===1&&(o=`0${o}`),a+"/"+o};async function V(s,a){const o=B(s),{width:f,height:g}=await o.metadata(),m=T(s);for(let i of O){const c=D.join(a+"/size/"+v()+"/","w"+i),l=D.join(c,m+".webp");if(await C(c,{recursive:!0}),!(!f||!g))if(f>i){const u=Math.round(g*i/f);await o.resize(i,u).webp().toFile(l)}else await o.webp().toFile(l)}const y=a+"/content/"+v()+"/",S="https://image.simpleaiart.com/size/"+v()+`/w1280/${m}.webp`;k.writeText(S),console.log("nr",y),await C(y,{recursive:!0}),await o.jpeg().toFile(y+"/"+m+".jpg")}const A={class:"w-full h-full"},z={class:"grid gap-5 grid-cols-2 justify-center"},G={class:"w-[600px] h-[500px]"},X=p("p",null,"current",-1),Y={class:"w-[600px] h-[500px]"},Z=p("p",null,"last",-1),he=H({__name:"index",setup(s){const a=F(""),o=F("/Users/twocucao/Workspace/01-Code/projects-aigc/simpleaiart-images"),f=()=>{const i=m();if(!i)return null;const c=new Blob([i],{type:"image/png"}),l=new FileReader;l.onload=function(u){a.value=u.target.result},l.readAsDataURL(c)},g=i=>{const c=i.toLowerCase();return c.endsWith(".png")||c.endsWith(".jpg")||c.endsWith(".jpeg")||c.endsWith(".gif")||c.endsWith(".bmp")},m=()=>{let i=k.read("public.file-url");if(!i){const l=k.readImage();return l.isEmpty()?null:l.toPNG()}return g(i)?R.createFromPath(i.replace("file://","")).toPNG():null},y=()=>{const i=m();if(!i)return null;V(i,o.value+"/static")},S=()=>{};return(i,c)=>{const l=E,u=P;return I(),q("div",A,[p("div",null,[h(l,{onClick:S},{default:_(()=>[w("Select Directory")]),_:1}),p("p",null,M(x(o)),1)]),p("div",z,[p("div",G,[h(u,{width:500,src:x(a)},null,8,["src"]),X,h(l,{onClick:f},{default:_(()=>[w("read clipboard")]),_:1}),h(l,{onClick:y},{default:_(()=>[w("save clipboard")]),_:1})]),p("div",Y,[h(u,{width:500,src:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"}),Z])])])}}});export{he as default};
