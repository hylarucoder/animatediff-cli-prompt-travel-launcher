import{P as N,X as g,ag as j,ah as E,p as k,d as p}from"./_getTag.cf4696dc.js";import{C as A,z as f,D as H,s as D,R as z,B as M,h as U,N as W,I,b as T,ab as V,f as q,A as b,j as K,m as G}from"./entry.978b97f1.js";import{w as x}from"./AntdIcon.22ef303b.js";let _=!1;try{const e=Object.defineProperty({},"passive",{get(){_=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}const Q=_;function ue(e,i,n,t){if(e&&e.addEventListener){let a=t;a===void 0&&Q&&(i==="touchstart"||i==="touchmove"||i==="wheel")&&(a={passive:!1}),e.addEventListener(i,n,a)}return{remove:()=>{e&&e.removeEventListener&&e.removeEventListener(i,n)}}}const B=Symbol("PortalContextKey"),X=function(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inTriggerContext:!0};A(B,{inTriggerContext:i.inTriggerContext,shouldRender:f(()=>{const{sPopupVisible:n,popupRef:t,forceRender:a,autoDestroy:o}=e||{};let s=!1;return(n||t||a)&&(s=!0),!n&&o&&(s=!1),s})})},J=()=>{X({},{inTriggerContext:!1});const e=H(B,{shouldRender:f(()=>!1),inTriggerContext:!1});return{shouldRender:f(()=>e.shouldRender.value||e.inTriggerContext===!1)}},Y=D({compatConfig:{MODE:3},name:"Portal",inheritAttrs:!1,props:{getContainer:N.func.isRequired,didUpdate:Function},setup(e,i){let{slots:n}=i,t=!0,a;const{shouldRender:o}=J();function s(){o.value&&(a=e.getContainer())}z(()=>{t=!1,s()}),M(()=>{a||s()});const v=U(o,()=>{o.value&&!a&&(a=e.getContainer()),a&&v()});return W(()=>{I(()=>{var l;o.value&&((l=e.didUpdate)===null||l===void 0||l.call(e,e))})}),()=>{var l;return o.value?t?(l=n.default)===null||l===void 0?void 0:l.call(n):a?T(V,{to:a},n):null:null}}});let P;function Z(e){if(typeof document>"u")return 0;if(e||P===void 0){const i=document.createElement("div");i.style.width="100%",i.style.height="200px";const n=document.createElement("div"),t=n.style;t.position="absolute",t.top="0",t.left="0",t.pointerEvents="none",t.visibility="hidden",t.width="200px",t.height="150px",t.overflow="hidden",n.appendChild(i),document.body.appendChild(n);const a=i.offsetWidth;n.style.overflow="scroll";let o=i.offsetWidth;a===o&&(o=n.clientWidth),document.body.removeChild(n),P=a-o}return P}const ee=`vc-util-locker-${Date.now()}`;let L=0;function te(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}function ne(e){const i=f(()=>!!e&&!!e.value);L+=1;const n=`${ee}_${L}`;q(t=>{if(g()){if(i.value){const a=Z(),o=te();j(`
html body {
  overflow-y: hidden;
  ${o?`width: calc(100% - ${a}px);`:""}
}`,n)}else E(n);t(()=>{E(n)})}},{flush:"post"})}let c=0;const h=g(),R=e=>{if(!h)return null;if(e){if(typeof e=="string")return document.querySelectorAll(e)[0];if(typeof e=="function")return e();if(typeof e=="object"&&e instanceof window.HTMLElement)return e}return document.body},de=D({compatConfig:{MODE:3},name:"PortalWrapper",inheritAttrs:!1,props:{wrapperClassName:String,forceRender:{type:Boolean,default:void 0},getContainer:N.any,visible:{type:Boolean,default:void 0},autoLock:k(),didUpdate:Function},setup(e,i){let{slots:n}=i;const t=b(),a=b(),o=b(),s=g()&&document.createElement("div"),v=()=>{var r,u;t.value===s&&((u=(r=t.value)===null||r===void 0?void 0:r.parentNode)===null||u===void 0||u.removeChild(t.value)),t.value=null};let l=null;const y=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)||t.value&&!t.value.parentNode?(l=R(e.getContainer),l?(l.appendChild(t.value),!0):!1):!0},$=()=>h?(t.value||(t.value=s,y(!0)),S(),t.value):null,S=()=>{const{wrapperClassName:r}=e;t.value&&r&&r!==t.value.className&&(t.value.className=r)};W(()=>{S(),y()});const F=G();return ne(f(()=>e.autoLock&&e.visible&&g()&&(t.value===document.body||t.value===s))),M(()=>{let r=!1;U([()=>e.visible,()=>e.getContainer],(u,m)=>{let[C,d]=u,[O,w]=m;h&&(l=R(e.getContainer),l===document.body&&(C&&!O?c+=1:r&&(c-=1))),r&&(typeof d=="function"&&typeof w=="function"?d.toString()!==w.toString():d!==w)&&v(),r=!0},{immediate:!0,flush:"post"}),I(()=>{y()||(o.value=x(()=>{F.update()}))})}),K(()=>{const{visible:r}=e;h&&l===document.body&&(c=r&&c?c-1:c),v(),x.cancel(o.value)}),()=>{const{forceRender:r,visible:u}=e;let m=null;const C={getOpenCount:()=>c,getContainer:$};return(r||u||a.value)&&(m=T(Y,{getContainer:$,ref:a,didUpdate:e.didUpdate},{default:()=>{var d;return(d=n.default)===null||d===void 0?void 0:d.call(n,C)}})),m}}}),oe=e=>({animationDuration:e,animationFillMode:"both"}),ae=e=>({animationDuration:e,animationFillMode:"both"}),ce=function(e,i,n,t){const o=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${o}${e}-enter,
      ${o}${e}-appear
    `]:p(p({},oe(t)),{animationPlayState:"paused"}),[`${o}${e}-leave`]:p(p({},ae(t)),{animationPlayState:"paused"}),[`
      ${o}${e}-enter${e}-enter-active,
      ${o}${e}-appear${e}-appear-active
    `]:{animationName:i,animationPlayState:"running"},[`${o}${e}-leave${e}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}};export{de as P,ue as a,ce as i,Q as s,X as u};
